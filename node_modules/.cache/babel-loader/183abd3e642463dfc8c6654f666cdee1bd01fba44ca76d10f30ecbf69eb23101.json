{"ast":null,"code":"import { takeLatest, all, call, put } from 'redux-saga/effects';\nimport { fetchArticlesSuccess, fetchArticlesFailed } from './articles.actions';\nimport { ARTICLES_ACTION_TYPES } from './articles.types';\nimport axios from 'axios';\nimport { baseUrl } from '../urls';\nconst url = `${baseUrl}/articles`;\nconst getArticles = async () => {\n  const response = await fetch(url);\n  return await response.json();\n};\nexport function* fetchArticlesAsync() {\n  try {\n    const articlesArray = yield call(getArticles, 'articles');\n    yield put(fetchArticlesSuccess(articlesArray));\n  } catch (error) {\n    yield put(fetchArticlesFailed(error));\n  }\n}\nexport function* onFetchArticles() {\n  yield takeLatest(ARTICLES_ACTION_TYPES.FETCH_ARTICLES_START, fetchArticlesAsync);\n}\nconst saveArticle = async payload => {\n  axios.post(url, payload.article, {\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${payload.token}`\n    }\n  });\n};\nexport function saveArticleAsync(_ref) {\n  let {\n    payload\n  } = _ref;\n  return function* () {\n    try {\n      const articleSaved = yield call(saveArticle, payload);\n      yield put(postArticleSuccess(articleSaved));\n    } catch (error) {\n      yield put(postArticleFailed(error));\n    }\n  }();\n}\nexport function* onPostArticle() {\n  yield takeLatest(ARTICLES_ACTION_TYPES.POST_ARTICLE_START, saveArticleAsync);\n}\nconst deleteArticle = async payload => {\n  const response = await fetch(`${url}/${payload.articleNumber}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${payload.token}`\n    }\n  });\n  return await response.json();\n};\nexport function deleteArticleAsync(_ref2) {\n  let {\n    payload\n  } = _ref2;\n  return function* () {\n    try {\n      const ArticleSaved = yield call(deleteArticle, payload);\n      yield put(deleteArticleSuccess(ArticleSaved));\n    } catch (error) {\n      yield put(deleteArticleFailed(error));\n    }\n  }();\n}\nexport function* onDeleteArticle() {\n  yield takeLatest(ARTICLES_ACTION_TYPES.DELETE_ARTICLE_START, deleteArticleAsync);\n}\nexport function* articlesSaga() {\n  yield all([call(onFetchArticles), call(onPostArticle), call(onDeleteArticle)]);\n}","map":{"version":3,"names":["takeLatest","all","call","put","fetchArticlesSuccess","fetchArticlesFailed","ARTICLES_ACTION_TYPES","axios","baseUrl","url","getArticles","response","fetch","json","fetchArticlesAsync","articlesArray","error","onFetchArticles","FETCH_ARTICLES_START","saveArticle","payload","post","article","headers","token","saveArticleAsync","articleSaved","postArticleSuccess","postArticleFailed","onPostArticle","POST_ARTICLE_START","deleteArticle","articleNumber","method","deleteArticleAsync","ArticleSaved","deleteArticleSuccess","deleteArticleFailed","onDeleteArticle","DELETE_ARTICLE_START","articlesSaga"],"sources":["/Users/sanjamandic/Desktop/react/portfolioReact/src/redux/articles/articles.saga.js"],"sourcesContent":["import {\n  takeLatest, all, call, put,\n} from 'redux-saga/effects';\nimport { \n  fetchArticlesSuccess,\n  fetchArticlesFailed,\n} from './articles.actions';\nimport { ARTICLES_ACTION_TYPES } from './articles.types';\nimport axios from 'axios';\nimport { baseUrl } from '../urls';\n\nconst url = `${baseUrl}/articles`\n\nconst getArticles = async() => {\n  const response = await fetch(url);\n  return await response.json();\n}\nexport function* fetchArticlesAsync() {\n  try {\n    const articlesArray = yield call(getArticles, 'articles');\n    yield put(fetchArticlesSuccess(articlesArray));\n  } catch (error) {\n    yield put(fetchArticlesFailed(error));\n  }\n}\n\nexport function* onFetchArticles() {\n  yield takeLatest(ARTICLES_ACTION_TYPES.FETCH_ARTICLES_START, fetchArticlesAsync);\n}\n\nconst saveArticle = async (payload) => {\n  axios.post(url, payload.article,\n      { headers: {'Content-Type': 'application/json', 'Authorization': `Bearer ${payload.token}`}},\n    );\n}\n\nexport function* saveArticleAsync({payload}) {\n  try {\n    const articleSaved = yield call(saveArticle, payload);\n    yield put(postArticleSuccess(articleSaved));\n  } catch (error) {\n    yield put(postArticleFailed(error));\n  }\n}\n\nexport function* onPostArticle() {\n  yield takeLatest(ARTICLES_ACTION_TYPES.POST_ARTICLE_START, saveArticleAsync);\n}\n\nconst deleteArticle = async (payload) => {\n  const response = await fetch(`${url}/${payload.articleNumber}`,\n  {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json', 'Authorization': `Bearer ${payload.token}`\n    },\n  }\n  )\n  return await response.json();\n}\n\nexport function* deleteArticleAsync({payload}) {\n  try {\n    const ArticleSaved = yield call(deleteArticle, payload);\n    yield put(deleteArticleSuccess(ArticleSaved));\n  } catch (error) {\n    yield put(deleteArticleFailed(error));\n  }\n}\n\nexport function* onDeleteArticle() {\n  yield takeLatest(ARTICLES_ACTION_TYPES.DELETE_ARTICLE_START, deleteArticleAsync);\n}\n\nexport function* articlesSaga() {\n  yield all([call(onFetchArticles), call(onPostArticle), call(onDeleteArticle)]);\n}\n"],"mappings":"AAAA,SACEA,UAAU,EAAEC,GAAG,EAAEC,IAAI,EAAEC,GAAG,QACrB,oBAAoB;AAC3B,SACEC,oBAAoB,EACpBC,mBAAmB,QACd,oBAAoB;AAC3B,SAASC,qBAAqB,QAAQ,kBAAkB;AACxD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,SAAS;AAEjC,MAAMC,GAAG,GAAI,GAAED,OAAQ,WAAU;AAEjC,MAAME,WAAW,GAAG,YAAW;EAC7B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACH,GAAG,CAAC;EACjC,OAAO,MAAME,QAAQ,CAACE,IAAI,EAAE;AAC9B,CAAC;AACD,OAAO,UAAUC,kBAAkB,GAAG;EACpC,IAAI;IACF,MAAMC,aAAa,GAAG,MAAMb,IAAI,CAACQ,WAAW,EAAE,UAAU,CAAC;IACzD,MAAMP,GAAG,CAACC,oBAAoB,CAACW,aAAa,CAAC,CAAC;EAChD,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,MAAMb,GAAG,CAACE,mBAAmB,CAACW,KAAK,CAAC,CAAC;EACvC;AACF;AAEA,OAAO,UAAUC,eAAe,GAAG;EACjC,MAAMjB,UAAU,CAACM,qBAAqB,CAACY,oBAAoB,EAAEJ,kBAAkB,CAAC;AAClF;AAEA,MAAMK,WAAW,GAAG,MAAOC,OAAO,IAAK;EACrCb,KAAK,CAACc,IAAI,CAACZ,GAAG,EAAEW,OAAO,CAACE,OAAO,EAC3B;IAAEC,OAAO,EAAE;MAAC,cAAc,EAAE,kBAAkB;MAAE,eAAe,EAAG,UAASH,OAAO,CAACI,KAAM;IAAC;EAAC,CAAC,CAC7F;AACL,CAAC;AAED,OAAO,SAAUC,gBAAgB;EAAA,IAAC;IAACL;EAAO,CAAC;EAAA,oBAAE;IAC3C,IAAI;MACF,MAAMM,YAAY,GAAG,MAAMxB,IAAI,CAACiB,WAAW,EAAEC,OAAO,CAAC;MACrD,MAAMjB,GAAG,CAACwB,kBAAkB,CAACD,YAAY,CAAC,CAAC;IAC7C,CAAC,CAAC,OAAOV,KAAK,EAAE;MACd,MAAMb,GAAG,CAACyB,iBAAiB,CAACZ,KAAK,CAAC,CAAC;IACrC;EACF,CAAC;AAAA;AAED,OAAO,UAAUa,aAAa,GAAG;EAC/B,MAAM7B,UAAU,CAACM,qBAAqB,CAACwB,kBAAkB,EAAEL,gBAAgB,CAAC;AAC9E;AAEA,MAAMM,aAAa,GAAG,MAAOX,OAAO,IAAK;EACvC,MAAMT,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEH,GAAI,IAAGW,OAAO,CAACY,aAAc,EAAC,EAC9D;IACEC,MAAM,EAAE,QAAQ;IAChBV,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAAE,eAAe,EAAG,UAASH,OAAO,CAACI,KAAM;IAC/E;EACF,CAAC,CACA;EACD,OAAO,MAAMb,QAAQ,CAACE,IAAI,EAAE;AAC9B,CAAC;AAED,OAAO,SAAUqB,kBAAkB;EAAA,IAAC;IAACd;EAAO,CAAC;EAAA,oBAAE;IAC7C,IAAI;MACF,MAAMe,YAAY,GAAG,MAAMjC,IAAI,CAAC6B,aAAa,EAAEX,OAAO,CAAC;MACvD,MAAMjB,GAAG,CAACiC,oBAAoB,CAACD,YAAY,CAAC,CAAC;IAC/C,CAAC,CAAC,OAAOnB,KAAK,EAAE;MACd,MAAMb,GAAG,CAACkC,mBAAmB,CAACrB,KAAK,CAAC,CAAC;IACvC;EACF,CAAC;AAAA;AAED,OAAO,UAAUsB,eAAe,GAAG;EACjC,MAAMtC,UAAU,CAACM,qBAAqB,CAACiC,oBAAoB,EAAEL,kBAAkB,CAAC;AAClF;AAEA,OAAO,UAAUM,YAAY,GAAG;EAC9B,MAAMvC,GAAG,CAAC,CAACC,IAAI,CAACe,eAAe,CAAC,EAAEf,IAAI,CAAC2B,aAAa,CAAC,EAAE3B,IAAI,CAACoC,eAAe,CAAC,CAAC,CAAC;AAChF"},"metadata":{},"sourceType":"module","externalDependencies":[]}